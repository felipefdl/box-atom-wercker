name: atom
version: 0.0.8
inherits: wercker/ubuntu12.04-nodejs0.10@1.0.6
type: main
platform: ubuntu@12.04
description: Box with all tools to build package for atom.io
packages:
  - atom.io@latest
  - xvfb@latest
keywords:
  - nodejs
  - atom
  - atom.io
script: |
  # Enable virtual display
  sudo sh -c 'echo "export DISPLAY=:99.0" > /etc/rc.local'
  sudo sh -c 'echo "start-stop-daemon --start --quiet --pidfile /tmp/xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -screen 0 1024x768x24 -ac +extension GLX +render -noreset" >> /etc/rc.local'
  sudo sh -c 'echo "sleep 3" >> /etc/rc.local'
  sudo sh -c 'echo "exit 0" >> /etc/rc.local'

  # Install Atom.io
  sudo add-apt-repository ppa:webupd8team/atom -y
  sudo apt-get update
  sudo apt-get install atom xvfb -y
